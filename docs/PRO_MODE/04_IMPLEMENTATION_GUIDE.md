# üòà –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –ß–µ–∫–ª–∏—Å—Ç –ø–æ —Ñ–∞–π–ª–∞–º

### 1. `bot/database/db.py` (–°–ù–ê–ß–ê–õ–ê)

- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:
  ```sql
  ALTER TABLE users ADD COLUMN pro_mode BOOLEAN DEFAULT 0;
  ALTER TABLE users ADD COLUMN pro_aspect_ratio TEXT DEFAULT '16:9';
  ALTER TABLE users ADD COLUMN pro_resolution TEXT DEFAULT '1K';
  ALTER TABLE users ADD COLUMN pro_mode_changed_at TEXT;
  ```

- [ ] –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  - [ ] `get_user_pro_settings(user_id)` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - [ ] `set_user_pro_mode(user_id, mode)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º
  - [ ] `set_pro_aspect_ratio(user_id, ratio)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
  - [ ] `set_pro_resolution(user_id, res)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ

### 2. `bot/utils/texts.py`

- [ ] –ù–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
  - [ ] `PROFILE_SETTINGS_TEXT` - —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞
  - [ ] `PRO_SETTINGS_TEXT` - —ç–∫—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - [ ] `MODE_CHANGED_TEXT` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  - [ ] `PRO_SETTINGS_HEADER` - —Ö–µ–¥–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ:
  - [ ] `PROFILE_TEXT` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º –∏ —Ü–µ–Ω—ã
  - [ ] `START_TEXT` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∂–∏–º

### 3. `bot/utils/helpers.py`

- [ ] –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:
  - [ ] `add_balance_and_mode_to_text(text, balance, pro_mode)` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

### 4. `bot/keyboards/inline.py`

- [ ] –ù–æ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
  - [ ] `get_mode_selection_keyboard()` - –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞
  - [ ] `get_pro_params_keyboard()` - –∫–Ω–æ–ø–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- [ ] –û–±–Ω–æ–≤–∏—Ç—å:
  - [ ] `get_profile_keyboard()` - –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò"

### 5. `bot/handlers/user_start.py`

- [ ] –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
  - [ ] `profile_settings_handler()` - –æ—Ç–∫—Ä—ã—Ç—å PROFILE_SETTINGS
  - [ ] `switch_mode_handler()` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º
  - [ ] `pro_settings_handler()` - –æ—Ç–∫—Ä—ã—Ç—å PRO_SETTINGS
  - [ ] `set_pro_params_handler()` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 6. `bot/handlers/creation.py`

- [ ] –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
  - [ ] –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å `use_pro` –≤ API
  - [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∂–∏–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
  - [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º –≤ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### User Object (–Ω–æ–≤—ã–µ –ø–æ–ª—è)

```python
user.pro_mode: bool = False         # —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º
user.pro_aspect_ratio: str = "16:9" # —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
user.pro_resolution: str = "1K"     # —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
user.pro_mode_changed_at: str       # –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

### Callback Data –ø–∞—Ç—Ç–µ—Ä–Ω—ã

```python
"mode_std"          # –≤—ã–±—Ä–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç
"mode_pro"          # –≤—ã–±—Ä–∞—Ç—å PRO
"aspect_16:9"       # –≤—ã–±—Ä–∞—Ç—å 16:9
"aspect_4:3"        # –≤—ã–±—Ä–∞—Ç—å 4:3
"res_1K"            # –≤—ã–±—Ä–∞—Ç—å 1K
"res_2K"            # –≤—ã–±—Ä–∞—Ç—å 2K
```

---

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### Unit —Ç–µ—Å—Ç—ã

- [ ] `test_db_get_pro_settings()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] `test_db_set_pro_mode()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞
- [ ] `test_add_balance_and_mode()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

### Integration —Ç–µ—Å—Ç—ã

- [ ] –ù–∞–∂–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ –°–¢–ê–ù–î–ê–†–¢
- [ ] –ù–∞–∂–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ PRO
- [ ] –ù–∞–∂–∞—Ç—å –≤–æ—Å—é—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å PRO –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–ø–∏ —É–∫–∞–∑–∞–Ω–∏—è —Ä–µ–∂–∏–º–∞

### E2E —Ç–µ—Å—Ç—ã –≤ Telegram

- [ ] –ü—Ä–∏ /start: –¥–µ—Ñ–æ–ª—Ç –°–¢–ê–ù–î–ê–†–¢
- [ ] –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: —Ä–µ–∂–∏–º –≤ header
- [ ] –û—Ç–∫—Ä—ã—Ç—å –ü—Ä–æ—Ñ–∏–ª—å
- [ ] –ù–∞–∂–∞—Ç—å "‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò"
- [ ] –í—ã–±—Ä–∞—Ç—å PRO
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫–∞ "–ü–ê–†–ê–ú–ï–¢–†–´" –∞–ø–ø–∞—Ä–∏–ª–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è PRO
- [ ] –û—Ç–∫—Ä—ã—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∂–∏–º –≤ header
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∂–∏–º –≤ —Ç–µ–∫—Å—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø–æ —à–∞–≥–∞–º

### –®–∞–≥ 1: –ë–µ–∫–∞–ø

```bash
# –ì–æ—Ç–æ–≤–∏–º –±–µ–∫–∞–ø
 sqlite3 users.db ".backup users_backup.db"
```

### –®–∞–≥ 2: –ü–æ –Ω–∞–≤–∏–¥–∏ –µ–¥–∏–Ω —Ä–∞—Å –¥–æ–æ–±—Ä–µ—Ç–∞—è—Ç–µ –∫–æ–ª–æ–Ω—ä –ø–∞ –≤—Ä–µ–º–µ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```sql
ALTER TABLE users ADD COLUMN pro_mode BOOLEAN DEFAULT 0;
ALTER TABLE users ADD COLUMN pro_aspect_ratio TEXT DEFAULT '16:9';
ALTER TABLE users ADD COLUMN pro_resolution TEXT DEFAULT '1K';
ALTER TABLE users ADD COLUMN pro_mode_changed_at TEXT;
```

### –®–∞–≥ 3: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
PRAGMA table_info(users);

-- –≤–æ–¥–Ω—É—ë –¥–∞–Ω–Ω—ã–µ
SELECT * FROM users LIMIT 1;
```

---

## –ü—Ä–∏—Å–Ω–æ—Å—ã

- **–í—Ä–µ–º—è:** 6-10 —á–∞—Å–æ–≤ (–¥–µ–Ω—å 1-4)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∞—á–Ω–∏—Ç–µ —Å –ë–î + Backend
- **–û—Å–∏:–ù** –í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ 04_ARCHITECTURE_PLAN.md –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–≤–µ—Ä–µ–Ω—Å–∞ –¥–ª—è API –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
