# API Fallback System ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìå –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

- [–û–±–∑–æ—Ä](#-–æ–±–∑–æ—Ä)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–§—É–Ω–∫—Ü–∏–∏](#-—Ñ—É–Ω–∫—Ü–∏–∏)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [Troubleshooting](#-troubleshooting)

---

## üéØ –û–±–∑–æ—Ä

**–§–∞–π–ª:** `bot/services/api_fallback.py`  
**–í–µ—Ä—Å–∏—è:** 2.0 (2025-12-23)  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Smart Fallback —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç?

–§–∞–π–ª **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç** –º–µ–∂–¥—É –¥–≤—É–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∏–∑–∞–π–Ω
    ‚Üì
üéØ API Fallback System
    ‚îú‚îÄ 1Ô∏è‚É£ –ü–æ–ø—ã—Ç–∫–∞ KIE.AI (–î–ï–®–ï–í–û, –ú–ï–î–õ–ï–ù–ù–û) ‚Äî 20-30 —Å–µ–∫
    ‚îÇ   ‚îî‚îÄ ‚úÖ –£—Å–ø–µ—Ö? –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    ‚îÇ   ‚îî‚îÄ ‚ùå –û—à–∏–±–∫–∞? –ò–¥—ë–º –¥–∞–ª—å—à–µ...
    ‚îÇ
    ‚îú‚îÄ 2Ô∏è‚É£ –ü–æ–ø—ã—Ç–∫–∞ Replicate (–î–û–†–û–ñ–ï, –ë–´–°–¢–†–û) ‚Äî 12-20 —Å–µ–∫
    ‚îÇ   ‚îî‚îÄ ‚úÖ –£—Å–ø–µ—Ö? –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    ‚îÇ   ‚îî‚îÄ ‚ùå –û—à–∏–±–∫–∞? –û—à–∏–±–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    ‚îÇ
    ‚îî‚îÄ üìä –õ–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥
```

### –ü–æ—á–µ–º—É —ç—Ç–æ –Ω—É–∂–Ω–æ?

1. **–≠–∫–æ–Ω–æ–º–∏—è –¥–µ–Ω–µ–≥** ‚Äî KIE.AI –≤ 2 —Ä–∞–∑–∞ –¥–µ—à–µ–≤–ª–µ
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** ‚Äî –ï—Å–ª–∏ KIE.AI —É–ø–∞–¥–µ—Ç, —Å—Ä–∞–±–æ—Ç–∞–µ—Ç Replicate
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–º** ‚Äî –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤—ã–±–∏—Ä–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** ‚Äî –í—Å—ë –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è, –≤–∏–¥–Ω–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ò–º–ø–æ—Ä—Ç—ã

```python
from services.kie_api import (
    generate_interior_with_nano_banana,  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞ —á–µ—Ä–µ–∑ KIE.AI
    clear_space_with_kie,               # –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ KIE.AI
)
from services.replicate_api import (
    generate_image_auto,                 # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞ —á–µ—Ä–µ–∑ Replicate
    generate_with_text_prompt,           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ø—Ä–æ–º–ø—Ç–æ–º
    clear_space_image,                   # –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ Replicate
)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
USE_KIE_API = os.getenv('USE_KIE_API', 'True').lower() == 'true'
KIE_API_KEY = os.getenv('KIE_API_KEY')
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------------------|----------|
| `USE_KIE_API` | `True` | –í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å KIE.AI –∫–∞–∫ PRIMARY |
| `KIE_API_KEY` | - | API –∫–ª—é—á –¥–ª—è KIE.AI |
| `REPLICATE_API_TOKEN` | - | API —Ç–æ–∫–µ–Ω –¥–ª—è Replicate (fallback) |

---

## üîß –§—É–Ω–∫—Ü–∏–∏

### 1. `smart_generate_interior()`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

```python
small_generate_interior(
    photo_file_id: str,    # ID —Ñ–æ—Ç–æ –∏–∑ Telegram (AgACAgIAAxkBAAI...)
    room: str,             # –¢–∏–ø –∫–æ–º–Ω–∞—Ç—ã (bedroom, living_room, kitchen...)
    style: str,            # –°—Ç–∏–ª—å –¥–∏–∑–∞–π–Ω–∞ (scandinavian, modern, classical...)
    bot_token: str,        # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram
) -> Optional[str]         # URL —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ None
```

**–ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

```
1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: USE_KIE_API=True –∏ KIE_API_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω?
   ‚îú‚îÄ –î–ê ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç generate_interior_with_nano_banana()
   ‚îÇ   ‚îú‚îÄ –ü–æ–ª—É—á–µ–Ω URL? ‚Üí return URL ‚úÖ
   ‚îÇ   ‚îî‚îÄ –ù–µ—Ç/–æ—à–∏–±–∫–∞? ‚Üí –ò–¥—ë–º –¥–∞–ª—å—à–µ
   ‚îÇ
   ‚îî‚îÄ –ù–ï–¢ ‚Üí –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç KIE.AI

2Ô∏è‚É£ –í—ã–∑—ã–≤–∞–µ—Ç generate_image_auto() (Replicate)
   ‚îú‚îÄ –ü–æ–ª—É—á–µ–Ω URL? ‚Üí return URL ‚úÖ
   ‚îî‚îÄ –ù–µ—Ç/–æ—à–∏–±–∫–∞? ‚Üí return None ‚ùå
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```python
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞ —Å–ø–∞–ª—å–Ω–∏ –≤ —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–æ–º —Å—Ç–∏–ª–µ
result = await smart_generate_interior(
    photo_file_id="AgACAgIAAxkBAAI...",
    room="bedroom",
    style="scandinavian",
    bot_token="123456:ABC..."
)

if result:
    print(f"‚úÖ –î–∏–∑–∞–π–Ω –≥–æ—Ç–æ–≤: {result}")
else:
    print("‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å (–æ–±–µ —Å–∏—Å—Ç–µ–º—ã —É–ø–∞–ª–∏)")
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```
======================================================================
üé® SMART GENERATE INTERIOR [FALLBACK SYSTEM]
   Room: bedroom
   Style: scandinavian
   Photo: AgACAgIAAxkBAAI...
======================================================================

üîÑ [ATTEMPT 1/2] KIE.AI NANO BANANA (Gemini 2.5 Flash) - PRIMARY
----------------------------------------------------------------------
‚è≥ –ó–∞–ø—É—Å–∫ KIE.AI NANO BANANA...
‚úÖ [ATTEMPT 1] SUCCESS - KIE.AI NANO BANANA
   Result: https://tempfile.aiquickdraw.com/workers/nano/image_xxx.png...
======================================================================
```

---

### 2. `smart_generate_with_text()`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø—Ä–æ–º–ø—Ç–æ–º

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –≠–∫—Å—Ç–µ—Ä—å–µ—Ä (–¥–æ–º, —É—á–∞—Å—Ç–æ–∫)
- "–î—Ä—É–≥–æ–µ –ø–æ–º–µ—â–µ–Ω–∏–µ" (–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç –æ—Ç —é–∑–µ—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

```python
smart_generate_with_text(
    photo_file_id: str,    # ID —Ñ–æ—Ç–æ –∏–∑ Telegram
    user_prompt: str,      # –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    bot_token: str,        # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram
    scene_type: str = "custom"  # –¢–∏–ø —Å—Ü–µ–Ω—ã (house_exterior, plot_exterior, other_room, custom)
) -> Optional[str]         # URL —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ None
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```python
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–∫—Å—Ç–µ—Ä—å–µ—Ä–∞ –¥–æ–º–∞
result = await smart_generate_with_text(
    photo_file_id="AgACAgIAAxkBAAI...",
    user_prompt="Modern house facade with glass windows",
    bot_token="123456:ABC...",
    scene_type="house_exterior"
)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ø—Ä–æ–º–ø—Ç–æ–º
result = await smart_generate_with_text(
    photo_file_id="AgACAgIAAxkBAAI...",
    user_prompt="–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å–ø–∞–ª—å–Ω—è —Å –±–µ—Ç–æ–Ω–Ω—ã–º–∏ —Å—Ç–µ–Ω–∞–º–∏",
    bot_token="123456:ABC...",
    scene_type="custom"
)
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```
======================================================================
‚úçÔ∏è  SMART GENERATE WITH TEXT [FALLBACK SYSTEM]
   Scene: house_exterior
   Prompt: Modern house facade with glass windows...
   Photo: AgACAgIAAxkBAAI...
======================================================================
```

---

### 3. `smart_clear_space()`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –æ—Ç –º–µ–±–µ–ª–∏ (AI inpainting)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

```python
smart_clear_space(
    photo_file_id: str,    # ID —Ñ–æ—Ç–æ –∏–∑ Telegram
    bot_token: str,        # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram
) -> Optional[str]         # URL –æ—á–∏—â–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ None
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```python
# –û—á–∏—Å—Ç–∫–∞ –∫–æ–º–Ω–∞—Ç—ã –æ—Ç –º–µ–±–µ–ª–∏
result = await smart_clear_space(
    photo_file_id="AgACAgIAAxkBAAI...",
    bot_token="123456:ABC..."
)

if result:
    print(f"‚úÖ –ö–æ–º–Ω–∞—Ç–∞ –æ—á–∏—â–µ–Ω–∞: {result}")
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```
======================================================================
üßΩ SMART CLEAR SPACE [FALLBACK SYSTEM]
   Photo: AgACAgIAAxkBAAI...
======================================================================

üîÑ [ATTEMPT 1/2] KIE.AI NANO BANANA (Gemini 2.5 Flash) - PRIMARY
----------------------------------------------------------------------
‚è≥ –ó–∞–ø—É—Å–∫ KIE.AI NANO BANANA –¥–ª—è –æ—á–∏—Å—Ç–∫–∏...
‚úÖ [ATTEMPT 1] SUCCESS - KIE.AI NANO BANANA
   Result: https://tempfile.aiquickdraw.com/workers/nano/image_xxx.png...
======================================================================
```

---

### 4. `get_fallback_status()`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å fallback —Å–∏—Å—Ç–µ–º—ã

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```python
{
    "primary_provider": "KIE.AI NANO BANANA (Gemini 2.5 Flash)",
    "fallback_provider": "Replicate nano-banana",
    "kie_api_enabled": True,
    "kie_api_key_configured": True,
    "replicate_available": True,
    "fallback_chain": "KIE.AI NANO BANANA ‚Üí Replicate nano-banana",
    "status": "READY"  # –∏–ª–∏ "REPLICATE ONLY"
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```python
status = await get_fallback_status()
print(f"Primary: {status['primary_provider']}")
print(f"Fallback: {status['fallback_provider']}")
print(f"Status: {status['status']}")

# Output:
# Primary: KIE.AI NANO BANANA (Gemini 2.5 Flash)
# Fallback: Replicate nano-banana
# Status: READY
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

```python
from services.api_fallback import smart_generate_interior

async def handle_generate_design(message):
    # –Æ–∑–µ—Ä –≤—ã–±—Ä–∞–ª —Å–ø–∞–ª—å–Ω—é –≤ —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–æ–º —Å—Ç–∏–ª–µ
    result = await smart_generate_interior(
        photo_file_id=message.photo[-1].file_id,
        room="bedroom",
        style="scandinavian",
        bot_token=BOT_TOKEN
    )
    
    if result:
        await message.answer_photo(result, caption="‚úÖ –í–∞—à –¥–∏–∑–∞–π–Ω –≥–æ—Ç–æ–≤!")
    else:
        await message.answer("‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")
```

### –ü—Ä–∏–º–µ—Ä 2: –í –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á

```python
import asyncio
from services.api_fallback import smart_generate_interior

queue = asyncio.Queue()

async def worker():
    while True:
        task = await queue.get()
        
        result = await smart_generate_interior(
            photo_file_id=task['photo_id'],
            room=task['room'],
            style=task['style'],
            bot_token=task['bot_token']
        )
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        if result:
            await send_result_to_user(task['user_id'], result)
        else:
            await send_error_to_user(task['user_id'])
        
        queue.task_done()

# –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É
await queue.put({
    'photo_id': 'AgACAgIAAxkBAAI...',
    'room': 'kitchen',
    'style': 'modern',
    'bot_token': '123456:ABC...',
    'user_id': 12345
})
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```python
from services.api_fallback import get_fallback_status

async def check_system_health():
    status = await get_fallback_status()
    
    print(f"üîç System Status:")
    print(f"   Primary enabled: {status['kie_api_enabled']}")
    print(f"   API keys configured: {status['kie_api_key_configured']}")
    print(f"   Replicate available: {status['replicate_available']}")
    print(f"   Overall: {status['status']}")
    
    if status['status'] != 'READY':
        print("‚ö†Ô∏è System not fully ready!")
```

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

| –£—Ä–æ–≤–µ–Ω—å | –°–∏–º–≤–æ–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|--------|---------|----------|
| INFO | üé®, üîÑ, ‚è≥, ‚úÖ | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | –ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, —É—Å–ø–µ—Ö |
| WARNING | ‚ö†Ô∏è, ‚è≠Ô∏è | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è | API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞ |
| ERROR | ‚ùå | –û—à–∏–±–∫–∏ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ |
| DEBUG | üìù, üìä | –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å, –¥–µ—Ç–∞–ª–∏ –ø–æ–ø—ã—Ç–∫–∏ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

```
======================================================================
üé® SMART GENERATE INTERIOR [FALLBACK SYSTEM]
   Room: bedroom
   Style: scandinavian
   Photo: AgACAgIAAxkBAAI...
======================================================================

üîÑ [ATTEMPT 1/2] KIE.AI NANO BANANA (Gemini 2.5 Flash) - PRIMARY
----------------------------------------------------------------------
‚è≥ –ó–∞–ø—É—Å–∫ KIE.AI NANO BANANA...
üìù DEBUG: –ó–∞–ø—Ä–æ—Å –∫ API...
‚úÖ [ATTEMPT 1] SUCCESS - KIE.AI NANO BANANA
   Result: https://tempfile.aiquickdraw.com/workers/nano/image_xxx.png...
======================================================================
```

### –ö–∞–∫ —á–∏—Ç–∞—Ç—å –ª–æ–≥–∏?

1. **`üé® SMART GENERATE INTERIOR`** ‚Äî –ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. **`üîÑ [ATTEMPT 1/2] KIE.AI NANO BANANA`** ‚Äî –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ (KIE.AI)
3. **`‚è≥ –ó–∞–ø—É—Å–∫ KIE.AI NANO BANANA...`** ‚Äî –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
4. **`‚úÖ [ATTEMPT 1] SUCCESS`** ‚Äî –£—Å–ø–µ—Ö! –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω
5. **`Result: https://...`** ‚Äî URL —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
# –í–∫–ª—é—á–∏—Ç—å KIE.AI (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –î–õ–Ø –≠–ö–û–ù–û–ú–ò–ò)
USE_KIE_API=True

# API –∫–ª—é—á KIE.AI (–ø–æ–ª—É—á–∏ –Ω–∞ https://kie.ai)
KIE_API_KEY=your_kie_api_key_here

# API —Ç–æ–∫–µ–Ω Replicate (fallback)
REPLICATE_API_TOKEN=your_replicate_token_here
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):**
```python
# PRIMARY: KIE.AI (–¥–µ—à–µ–≤–æ)
# FALLBACK: Replicate (–¥–æ—Ä–æ–∂–µ)
USE_KIE_API=True
```

**–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ Replicate PRIMARY:**
```python
# PRIMARY: Replicate (–¥–æ—Ä–æ–∂–µ, –Ω–æ –±—ã—Å—Ç—Ä–æ)
USE_KIE_API=False
```

---

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "[ATTEMPT 1] FAILED - No result from KIE.AI"

**–ü—Ä–∏—á–∏–Ω—ã:**
- KIE.AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–ª–≥–æ (–¥–æ 30 —Å–µ–∫)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–æ–∂–¥–∏—Ç—å –¥–æ–ª—å—à–µ (timeout 300 —Å–µ–∫)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL —Ñ–æ—Ç–æ –∏–∑ Telegram
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VPN (–µ—Å–ª–∏ –≤ –†–§)
4. System –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Replicate

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "‚ùå SMART GENERATE FAILED - ALL ATTEMPTS EXHAUSTED"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –û–±–µ —Å–∏—Å—Ç–µ–º—ã (KIE.AI –∏ Replicate) —É–ø–∞–ª–∏
- API –∫–ª—é—á–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–æ—Ç–æ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```bash
   echo $KIE_API_KEY
   echo $REPLICATE_API_TOKEN
   ```
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–∏—Å

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "‚è≠Ô∏è [ATTEMPT 1] SKIPPED - KIE.AI not configured"

**–ü—Ä–∏—á–∏–Ω—ã:**
- `USE_KIE_API=False` –≤ `.env`
- `KIE_API_KEY` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í–∫–ª—é—á–∏ KIE.AI
USE_KIE_API=True
KIE_API_KEY=your_key_here

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å–∏—Å—Ç–µ–º—É
sudo systemctl restart bot
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Slowdown –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ:**

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å KIE.AI
   ```python
   status = await get_fallback_status()
   print(status)
   ```

2. –ï—Å–ª–∏ `kie_api_enabled: False` ‚Üí –≤–∫–ª—é—á–∏:
   ```bash
   USE_KIE_API=True
   ```

3. –ï—Å–ª–∏ `replicate_available: False` ‚Üí –¥–æ–±–∞–≤—å —Ç–æ–∫–µ–Ω
   ```bash
   REPLICATE_API_TOKEN=your_token
   ```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—Ç—å?

```python
metrics = {
    "total_requests": 0,
    "kie_ai_success": 0,
    "kie_ai_failed": 0,
    "replicate_used": 0,  # Fallback –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
    "replicate_success": 0,
    "replicate_failed": 0,
    "total_failed": 0,
    "avg_time_kie": 0,
    "avg_time_replicate": 0,
}
```

### –û–∂–∏–¥–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|----------|
| KIE.AI Success Rate | >95% | –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ 95%+ —Å–ª—É—á–∞–µ–≤ |
| Avg Time KIE.AI | 20-30s | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è |
| Replicate Used Rate | <5% | Fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ |
| Total Failure Rate | <1% | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å |

---

## üîÑ Flow –¥–∏–∞–≥—Ä–∞–º–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  api_fallback.py: smart_generate_interior()               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ USE_KIE_API?    ‚îÇ  ‚îÇ KIE_API_KEY?    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                    ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ       –û–±–∞ True? (YES)         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ KIE.AI NANO BANANA (TRY 1) ‚îÇ
      ‚îÇ (Gemini 2.5 Flash)          ‚îÇ
      ‚îÇ 20-30 —Å–µ–∫                    ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ  –£—Å–ø–µ—Ö?             ‚îÇ
      ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
    –î–ê   ‚îÇ              ‚îÇ   –ù–ï–¢
         ‚îÇ              ‚îÇ
      ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ ‚úÖ      ‚îÇ   ‚îÇ Replicate TRY 2       ‚îÇ
      ‚îÇ return  ‚îÇ   ‚îÇ (nano-banana)         ‚îÇ
      ‚îÇ URL     ‚îÇ   ‚îÇ 12-20 —Å–µ–∫             ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ  –£—Å–ø–µ—Ö?       ‚îÇ
                   ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
                  –î–ê  ‚îÇ        ‚îÇ   –ù–ï–¢
                      ‚îÇ        ‚îÇ
                   ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
                   ‚îÇ ‚úÖ      ‚îÇ  ‚îÇ
                   ‚îÇ return  ‚îÇ  ‚îÇ
                   ‚îÇ URL     ‚îÇ  ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
                                ‚îÇ
                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                           ‚îÇ ‚ùå             ‚îÇ
                           ‚îÇ return None    ‚îÇ
                           ‚îÇ (–æ–±–µ —É–ø–∞–ª–∏)    ‚îÇ
                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **[`bot/services/kie_api.py`](./KIE_AI_INTEGRATION.md)** ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KIE.AI
- **[`bot/services/replicate_api.py`](./REPLICATE_INTEGRATION.md)** ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Replicate
- **[`bot/services/prompts.py`](../bot/services/prompts.py)** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- **[`bot/services/design_styles.py`](../bot/services/design_styles.py)** ‚Äî –°—Ç–∏–ª–∏ –∏ –∫–æ–º–Ω–∞—Ç—ã

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

- [x] –û–±–µ API —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
- [x] KIE.API —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ PRIMARY
- [x] Replicate —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ FALLBACK
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –í—Å–µ 3 —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (generate, text, clear)
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –°—Ç–∞—Ç—É—Å —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] VPN –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–¥–ª—è –öIE.AI –∏–∑ –†–§)
- [x] `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [x] –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

**–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω:** 2025-12-23  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
